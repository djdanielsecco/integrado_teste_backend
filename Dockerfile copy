from ubuntu:latest

#Upadte


WORKDIR /app
RUN mkdir /app/backend
RUN chmod 777 /app/backend
# RUN rm -rf coverage

WORKDIR /home/backend
COPY ./backend .
RUN apt-get update -y
RUN apt-get upgrade -y 

RUN apt-get install curl -y 

RUN curl -sL https://deb.nodesource.com/setup_18.x | bash -
RUN apt-get install -y nodejs
RUN npm i -g @nestjs/cli
RUN npm install pm2@latest -g

# RUN npm run build
# RUN pm2 start dist/main.js

WORKDIR /app/backend
RUN npm i
# CMD ["pm2", "monit"]
# CMD bash
ENTRYPOINT exec npm run start:debug
